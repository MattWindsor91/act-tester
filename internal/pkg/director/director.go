// Copyright (c) 2020 Matt Windsor and contributors
//
// This file is part of act-tester.
// Licenced under the MIT licence; see `LICENSE`.

// Package director contains the top-level ACT test director, which manages a full testing campaign.
package director

import (
	"context"

	"github.com/MattWindsor91/act-tester/internal/pkg/config"
)

// Director contains the main state and configuration for the test director.
type Director struct {
	// Config is the top-level configuration for the tester.
	Config *config.Config

	// OutDir contains the root output directory for things generated by this director.
	OutDir string
}

// Direct runs the director d over whichever test plan is loaded into it.
func (d *Director) Direct(ctx context.Context) error {
	var err error

	var ps *pathset
	if ps, err = d.prepare(); err != nil {
		return err
	}

	var fc []string
	if fc, err = d.fuzzCorpus(ps); err != nil {
		return err
	}

	return d.directMachine(ctx, ps, fc)
}

func (d *Director) prepare() (*pathset, error) {
	// TODO(@MattWindsor91)

	return nil, nil
}

func (d *Director) fuzzCorpus(_ *pathset) (corpusFiles []string, err error) {
	// TODO(@MattWindsor91)

	return nil, nil
}

func (d *Director) directMachine(_ context.Context, _ *pathset, _ []string) error {
	// TODO(@MattWindsor91)
	return nil
}
